<div class="page">

  <h2 class="title">Liste des suggestions</h2>

  <button class="btn-add" [routerLink]="['/suggestions/add']">Ajouter une suggestion</button>

  <!-- Recherche -->
  <input
    class="search"
    type="text"
    placeholder="Rechercher une suggestion"
    [(ngModel)]="searchText"
  />

  <div class="layout">

    <!-- LISTE SUGGESTIONS -->
    <div class="list">
      <div class="card" *ngFor="let s of filteredSuggestions()">

        <div class="card-header">
          <h3 class="card-title">{{ s.title }}</h3>
          <p class="meta">
            <span class="category">{{ s.category }}</span>
            <span class="dot">‚Ä¢</span>
            <span class="date">{{ s.date | date:'dd/MM/yyyy' }}</span>
          </p>
        </div>

        <p class="desc">{{ s.description }}</p>

        <!-- Status -->
        <div class="badges">
          <span class="badge accepted" *ngIf="s.status === 'acceptee'">ACCEPT√âE</span>
          <span class="badge refused" *ngIf="s.status === 'refusee'">REFUS√âE</span>
          <span class="badge pending" *ngIf="s.status === 'en_attente'">EN ATTENTE</span>
        </div>

        <!-- Actions (cach√©es si refus√©e) -->
        <div class="actions" *ngIf="s.status !== 'refusee'">

          <button class="btn btn-like" (click)="like(s)">
            üëç Like <span class="count">{{ s.nbLikes }}</span>
          </button>

          <button
            class="btn btn-fav"
            (click)="addToFavorites(s)"
            [disabled]="isFavorite(s)"
          >
            ‚≠ê {{ isFavorite(s) ? 'D√©j√† en favoris' : 'Ajouter aux favoris' }}
          </button>

          <button class="btn btn-detail" [routerLink]="['/suggestions/detail', s.id]">
            üìÑ Voir d√©tails
          </button>

        </div>
      </div>
    </div>

    <!-- FAVORIS -->
    <div class="favorites">
      <h4 class="fav-title">Favoris</h4>

      <p class="empty" *ngIf="favorites.length === 0">
        Aucune suggestion en favoris pour le moment.
      </p>

      <div class="fav-item" *ngFor="let f of favorites">
        <div class="fav-name">{{ f.title }}</div>
        <div class="fav-sub">{{ f.category }}</div>
      </div>
    </div>

  </div>
</div>
